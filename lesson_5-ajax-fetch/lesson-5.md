# Взаимодействие клиента и веб сервера по протоколу http

Когда клиент (например, веб-браузер) отправляет запрос на веб-сервер, он использует протокол HTTP (HyperText Transfer Protocol). HTTP является протоколом прикладного уровня, который определяет способ передачи данных между клиентом и сервером в Интернете. Взаимодействие между клиентом и сервером по протоколу HTTP состоит из следующих шагов:

1. Установление соединения: клиент устанавливает соединение с сервером, отправляя ему запрос на определенный адрес (URL). Сервер отвечает клиенту сообщением о статусе соединения.

2. Отправка запроса: клиент отправляет на сервер запрос, содержащий метод HTTP (GET, POST, PUT, DELETE и т.д.), URL-адрес, к которому он обращается, и другие дополнительные параметры.

3. Получение ответа: сервер обрабатывает запрос и отправляет клиенту ответ, который содержит статус HTTP (200 OK, 404 Not Found и т.д.), заголовки ответа (Content-Type, Content-Length и т.д.) и тело ответа (HTML, JSON, XML и т.д.).

4. Закрытие соединения: после получения ответа от сервера клиент закрывает соединение. Если клиент хочет отправить еще один запрос на тот же сервер, он должен установить новое соединение.

Протокол HTTP является текстовым протоколом, что означает, что запросы и ответы передаются в виде текстовых сообщений. Кроме того, протокол HTTP является stateless (без сохранения состояния), что означает, что каждый запрос и ответ обрабатывается независимо от предыдущих запросов и ответов. Для сохранения состояния между клиентом и сервером может использоваться технология cookie, которая позволяет серверу сохранять информацию о состоянии клиента и передавать ее между запросами и ответами.

# Ajax запрос с помощью функции fetch()

AJAX-запросы позволяют отправлять запросы на сервер и получать ответы без перезагрузки страницы. Одним из методов отправки AJAX-запросов является функция fetch(). Она используется для выполнения запросов на сервер и возвращает Promise.

Пример AJAX-запроса с помощью функции fetch():

```php
fetch('https://jsonplaceholder.typicode.com/users')
.then(response => response.json())
.then(data => console.log(data))
.catch(error => console.error(error));
```

В этом примере отправляется GET-запрос на URL-адрес "https://jsonplaceholder.typicode.com/users". Затем метод .then() обрабатывает полученный ответ от сервера, преобразуя его в формат JSON с помощью метода .json(). Затем в функции обратного вызова метода .then() выводится содержимое ответа в консоль. Если при выполнении запроса возникла ошибка, метод .catch() будет вызван, чтобы обработать эту ошибку.

Пример отправки POST-запроса с использованием функции fetch():

```php
fetch('https://jsonplaceholder.typicode.com/posts', { // 1 аргумент строка запроса, вид запроса в зависимости от того как настроен сервер
method: 'POST',
body: JSON.stringify({
title: 'foo',
body: 'bar',
userId: 1
}),
headers: {
'Content-type': 'application/json; charset=UTF-8'
}
})
.then(response => response.json())
.then(data => console.log(data))
.catch(error => console.error(error));
```

В этом примере отправляется POST-запрос на URL-адрес "https://jsonplaceholder.typicode.com/posts", передавая в теле запроса объект с полями title, body и userId. Заголовок запроса Content-Type указывает, что данные в теле запроса представлены в формате JSON. После получения ответа от сервера ответ преобразуется в формат JSON с помощью метода .json() и выводится в консоль. Если при выполнении запроса возникла ошибка, метод .catch() будет вызван, чтобы обработать эту ошибку.
